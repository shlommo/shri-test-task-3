{"version":3,"sources":["webpack:///webpack/bootstrap 8482c6acf7ba17033517","webpack:///./D:/Sayan/shri-test-task-3/client/js/main.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/application.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/rooms-presenter.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/data/model.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/data/data.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/view.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/index.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/meeting-rooms-view.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/abstract-view.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/calendar.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/tools/hideOnClickOutside.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/tools/helpers.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/renderCalendarWidget.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/activateRoomName.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/renderEvents.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/api-service/index.js","webpack:///./D:/Sayan/shri-test-task-3/~/whatwg-fetch/fetch.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/api-service/queries/index.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/api-service/queries/query.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/api-service/queries/mutation.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/api-service/grapnhQlRequest.js","webpack:///./D:/Sayan/shri-test-task-3/client/js/tools/createSvgSprite.js"],"names":["getAll","then","data","showMeetingRooms","document","addEventListener","e","newData","Object","assign","date","detail","meetingRoomsData","Application","MEETING_ROOMS","EVENT_CREATE","RoomsPresenter","model","events","rooms","console","log","Model","state","_state","_defaultState","TYPES","EVENT_EDIT","ERROR","RENDERS","type","inputData","renderView","globalTimeout","MeetingRoomsView","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","dayMin","dayMax","dayTotal","initialAppDate","initialAppDay","dateValue","IS_INPUT_DATE_EQUAL_INITIAL_APP_DATE","IS_PAST","cellMarkup","time","cell","undefined","dataTime","inputMarkup","cellList","diagramCellMarkup","isNow","isCurrentTime","now","currentTime","diagramTimeMarkup","diagramDayMarkup","inputDate","timeNowEl","element","querySelector","dayEl","timelineCellArr","querySelectorAll","dayElWidth","getComputedStyle","width","slice","minuteInSec","valueOf","dayStart","setHours","currentMinute","minuteStep","classList","add","style","left","innerHTML","opacity","Array","from","timelineCell","timelineCellValue","getAttribute","isNewDate","updateTime","renderClockLine","window","clearTimeout","setTimeout","clock","_diagramSidebarMarkup","_diagramRowBodyMarkup","_rowClass","rowClass","diagramSidebarMarkup","diagramRowBodyMarkup","name","capacity","floor","roomList","diagramDayTemp","room","roomMarkup","getRoomMarkup","title","id","diagramRowMarkup","floors","indexOf","push","sort","a","b","floorList","getRoomList","header","diagram","diagramTimelineTimeMarkup","getCellList","getFloorListMarkup","eventNewTrigger","preventDefault","alert","windowResizeHandler","renderCalendarWidget","render","renderEvents","AbstractView","appElement","getElementById","parentNode","replaceChild","viewRendered","Error","_element","domElement","createElement","getMarkup","firstChild","bindHandlers","calendarMarkup","openCalendar","calendarTrigger","calendar","body","classToAdd","classToBody","calendarOverlay","contains","removeAction","remove","selector","callback","outsideClickListener","event","elem","elemChildIsTarget","checkEventTarget","clickCallback","target","removeClickListener","isTarget","i","childNodes","length","children","checkNode","node","hasChildNodes","recuChildren","getCoords","box","getBoundingClientRect","top","pageYOffset","pageXOffset","getNodeFromMarkup","markupTemplate","div","getDay","addListenerMulti","el","s","fn","split","forEach","removeListenerMulti","removeEventListener","debounce","f","ms","timer","args","onComplete","apply","getDateValue","RenderCalendarWidget","calendarWidget","_monthNames","_monthNamesShortcuts","d","today","currentMonth","nowDay","nowMonth","daysView","todayClass","setDate","monthView","yearQuarter","transform","calendarTriggerArr","self","calendarTriggerDirection","windowWidth","innerWidth","quarterMaxValue","setAttribute","moveCalendarWidget","dayArr","calendarHeaderTitle","yearValue","monthValue","dayValue","hourValue","minutesValue","secondsValue","getSeconds","dateChangeEvent","CustomEvent","dispatchEvent","inputDateValue","currentYear","dayTitle","monthViewNode","appendChild","Math","activateCalendarSlide","dayHandler","diagramBody","diagramBodyCnt","diagramRoomArr","diagramRoom","diagramRoomName","roomNameTag","roomNameTagNode","elCoordsLeft","roomNameTagArr","diagramRowBody","diagramRowBodyLeftCoords","RenderEvents","inputEvents","roomArr","MINUTE","HOUR","inputDay","inputDayStart","inputDayEnd","roomsWithBusyTime","eventLeft","eventWidth","isFilled","inputEventId","start","end","extraClass","timeSlotType","eventId","startTime","endTime","timeNode","getEventMarkup","cssText","eventDateStart","dateStart","eventDateEnd","dateEnd","eventDateStartValue","eventDateEndValue","eventStartMinuteFromDateStart","round","eventEndMinuteFromDateStart","eventDuration","roomId","timeContainer","eventStartHour","busyTimeNode","getTimeNode","timeStampMinute","hasOwnProperty","IS_TODAY_EQUAL_TO_THE_INPUT_DAY","minutesFromHourStarted","startMinute","endMinute","roomArrWithFreeTime","roomWithFreeTime","minuteLoop","freeTime","freeTimeStart","freeTimeDuration","freeTimeNode","renderPlannedEvent","renderUnplannedEvents","ApiService","users","responseData","getAllRequest","Promise","resolve","reject","getRooms","res","getEvents","eventsSortedByDate","dateStartDay","getUsers","catch","error","fetch","support","searchParams","iterable","Symbol","blob","Blob","formData","arrayBuffer","viewClasses","isDataView","obj","DataView","prototype","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","toString","call","normalizeName","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","Headers","headers","map","append","isArray","getOwnPropertyNames","oldValue","get","has","set","thisArg","keys","values","entries","consumed","bodyUsed","fileReaderReady","reader","onload","result","onerror","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","join","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","url","credentials","mode","referrer","clone","form","trim","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","query","mutation","createEvent","eventInput","usersIds","checkStatus","parseJSON","stringify","file","revision","createElementNS","createSVGRect","isLocalStorage","insertIT","insertAdjacentHTML","insert","localStorage","getItem","setItem"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8482c6acf7ba17033517","import Application from './application';\r\nimport ApiService from './api-service';\r\nimport createSvgSprite from './tools/createSvgSprite';\r\nimport createMeetingRoom from './views/meeting-rooms-view';\r\n\r\n// const createEvent = mutation.createEvent(\r\n//   `{\r\n//     title: \"Тестовой запрос\",\r\n//     dateStart: \"${new Date().toISOString()}\",\r\n//     dateEnd: \"${new Date().toISOString()}\"}\r\n//   `, `\"${[1]}\"`, 6);\r\nApiService.getAll()\r\n  .then((data) => {\r\n    Application.data = data;\r\n    Application.showMeetingRooms();\r\n    createSvgSprite();\r\n\r\n    document.addEventListener('dateChange', (e) => {\r\n      const newData = Object.assign(data, {\r\n        date: e.detail.date\r\n      });\r\n\r\n      Application.data = newData;\r\n      Application.showMeetingRooms();\r\n    });\r\n  });\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/main.js","import RoomsPresenter from './rooms-presenter';\r\nimport {TYPES} from './data/data';\r\nimport view from './view';\r\n\r\nlet meetingRoomsData;\r\n\r\nexport default class Application {\r\n\r\n  static showMeetingRooms() {\r\n    view(TYPES.MEETING_ROOMS, meetingRoomsData);\r\n  }\r\n\r\n  static showEventCreate() {\r\n    view(TYPES.EVENT_CREATE, meetingRoomsData)\r\n  }\r\n\r\n  static set data(data) {\r\n    meetingRoomsData = data;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/application.js","import Model from './data/model';\r\n\r\nclass RoomsPresenter {\r\n\r\n  constructor(model = Model) {\r\n    this.model = model;\r\n  }\r\n\r\n  setData(data) {\r\n    this.events = data.events;\r\n    this.rooms = data.rooms;\r\n    console.log(this.rooms, this.events);\r\n  }\r\n\r\n  renderRooms() {\r\n  }\r\n\r\n}\r\n\r\nexport default new RoomsPresenter();\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/rooms-presenter.js","class Model {\r\n  constructor(state) {\r\n    this._state = state;\r\n    this._defaultState = state;\r\n  }\r\n}\r\n\r\nexport default new Model();\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/data/model.js","export const TYPES = {\r\n  MEETING_ROOMS: 'meeting_rooms',\r\n  EVENT_CREATE: 'event-create',\r\n  EVENT_EDIT: 'event-edit',\r\n  ERROR: 'error'\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/data/data.js","import {TYPES} from './data/data';\r\nimport createMeetingRoom from './views/meeting-rooms-view';\r\n\r\nconst RENDERS = {\r\n  [TYPES.MEETING_ROOMS]: createMeetingRoom,\r\n};\r\n\r\nexport default (type, inputData) => {\r\n  RENDERS[type](inputData).renderView();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/view.js","import MeetingRoomsView from './meeting-rooms-view';\r\n\r\nexport default (data) => new MeetingRoomsView(data);\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/index.js","import AbstractView from './../abstract-view';\r\nimport Application from './../../application';\r\nimport {calendarMarkup, openCalendar} from './calendar';\r\nimport RenderCalendarWidget from './renderCalendarWidget';\r\nimport {debounce, getDateValue} from '../../tools/helpers';\r\nimport activateRoomName from './activateRoomName';\r\nimport RenderEvents from './renderEvents';\r\n\r\nlet globalTimeout;\r\n\r\nclass MeetingRoomsView extends AbstractView {\r\n\r\n  constructor(inputData) {\r\n    super(inputData);\r\n    this.rooms = inputData.rooms;\r\n    this.date = inputData.date || new Date();\r\n    this.year = this.date.getFullYear();\r\n    this.month = this.date.getMonth();\r\n    this.day = this.date.getDate();\r\n    this.hour = this.date.getHours();\r\n    this.minute = this.date.getMinutes();\r\n    this.dayMin = 8;\r\n    this.dayMax = 22;\r\n    this.dayTotal = this.dayMax - this.dayMin + 1;\r\n    this.initialAppDate = new Date();\r\n    this.initialAppDay = getDateValue(this.initialAppDate).day;\r\n    this.dateValue = getDateValue(this.date).day;\r\n    this.IS_INPUT_DATE_EQUAL_INITIAL_APP_DATE = this.dateValue === this.initialAppDay;\r\n    this.IS_PAST = this.dateValue < this.initialAppDay;\r\n    this.events = inputData.events[this.dateValue] || [];\r\n  }\r\n\r\n  diagramCellMarkup(cellMarkup, time) {\r\n    const cell = (cellMarkup !== undefined ) ? cellMarkup : '';\r\n    const dataTime = `${time !== undefined ? 'data-time=' + time : ''}`;\r\n    return `<div class=\"diagram__cell\" ${dataTime}>${cell}</div>`;\r\n  }\r\n\r\n  getCellList(inputMarkup) {\r\n    let cellList = '';\r\n    for (let time = this.dayMin; time <= this.dayMax; time++) {\r\n      cellList += this.diagramCellMarkup(inputMarkup, time)\r\n    }\r\n    return cellList;\r\n  }\r\n\r\n  diagramTimeMarkup(time, isNow, isCurrentTime) {\r\n    const now = isNow ? ' diagram__time--now' : '';\r\n    const minute = this.minute < 10 ? `0${this.minute}` : this.minute;\r\n    const currentTime = `${this.hour}:${minute}`;\r\n    return `<span class=\"diagram__time${now}\">${isCurrentTime !== undefined ? currentTime : time}</span>`;\r\n  }\r\n\r\n  diagramTimelineTimeMarkup() {\r\n    const diagramTimeMarkup = this.diagramTimeMarkup(false, true, true);\r\n    let diagramDayMarkup = '';\r\n    for (let time = this.dayMin; time <= this.dayMax; time++) {\r\n      diagramDayMarkup += this.diagramCellMarkup(this.diagramTimeMarkup(time), time);\r\n    }\r\n    return `<div class=\"diagram__day\">${diagramTimeMarkup}${diagramDayMarkup}</div>`;\r\n  }\r\n\r\n  updateTime(inputDate) {\r\n    const date = inputDate || new Date();\r\n    this.date = date;\r\n    this.hour = date.getHours();\r\n    this.minute = date.getMinutes();\r\n  }\r\n\r\n  renderClockLine() {\r\n    const timeNowEl = this.element.querySelector('.diagram__time--now');\r\n    const dayEl = this.element.querySelector('.diagram__time-line .diagram__day');\r\n    const timelineCellArr = this.element.querySelectorAll('.diagram__time-line .diagram__cell');\r\n    const dayElWidth = getComputedStyle(dayEl).width.slice(0, -2);\r\n    const minuteInSec = 60 * 1000;\r\n    const now = this.date.valueOf();\r\n    const date = new Date(now);\r\n    const dayStart = date.setHours(8, 0, 0);\r\n    const currentMinute = (now - dayStart) / minuteInSec;\r\n    this.minuteStep = dayElWidth / (this.dayTotal * 60);\r\n    const minute = this.minute < 10 ? `0${this.minute}` : this.minute;\r\n\r\n    if (this.IS_INPUT_DATE_EQUAL_INITIAL_APP_DATE) {\r\n      timeNowEl.classList.add('show');\r\n\r\n      timeNowEl.style.left = `${currentMinute * this.minuteStep}px`;\r\n      timeNowEl.innerHTML = `${this.hour}:${minute}`;\r\n\r\n      if (currentMinute < 0 || currentMinute > this.dayTotal * 60) {\r\n        timeNowEl.style.opacity = 0;\r\n      }\r\n\r\n      for (let timelineCell of Array.from(timelineCellArr)) {\r\n        const timelineCellValue = timelineCell.getAttribute('data-time');\r\n        if (timelineCellValue <= this.date.getHours()) {\r\n          timelineCell.classList.add('past');\r\n        }\r\n      }\r\n    }\r\n    else if (this.IS_PAST) {\r\n      for (let timelineCell of Array.from(timelineCellArr)) {\r\n        timelineCell.classList.add('past');\r\n      }\r\n    }\r\n  }\r\n\r\n  clock(isNewDate) {\r\n    if (isNewDate) {\r\n      this.updateTime();\r\n    } else {\r\n      this.updateTime(this.date);\r\n    }\r\n\r\n    this.renderClockLine();\r\n\r\n    // Clear all timeouts\r\n    while (globalTimeout--) {\r\n      window.clearTimeout(globalTimeout);\r\n    };\r\n\r\n    globalTimeout = setTimeout(() => {\r\n      this.clock(true);\r\n    }, 60000);\r\n  }\r\n\r\n  diagramRowMarkup(_diagramSidebarMarkup, _diagramRowBodyMarkup, _rowClass) {\r\n    const rowClass = _rowClass || 'diagram__row';\r\n    const diagramSidebarMarkup = _diagramSidebarMarkup || '';\r\n    const diagramRowBodyMarkup = _diagramRowBodyMarkup || '';\r\n    return `<div class=\"${rowClass}\">\r\n              <div class=\"diagram__sidebar\">${diagramSidebarMarkup}</div>\r\n              <div class=\"diagram__row-body\">${diagramRowBodyMarkup}</div>\r\n            </div>`\r\n  }\r\n\r\n  getRoomMarkup(name, capacity) {\r\n    return `<div class=\"diagram__room-name\">${name}</div>\r\n            <div class=\"diagram__room-capacity\">${capacity} человек</div>`;\r\n  }\r\n\r\n  getRoomList(floor) {\r\n    let roomList = '';\r\n    const diagramDayTemp = '<div class=\"diagram__day\"></div>'\r\n\r\n    for (let room of this.rooms) {\r\n      if (room.floor === floor) {\r\n        const roomMarkup = this.getRoomMarkup(room.title, room.capacity);\r\n        roomList += `<div class=\"diagram__room\" data-room-id=\"${room.id}\">\r\n                        ${this.diagramRowMarkup(roomMarkup, diagramDayTemp)}\r\n                      </div>`;\r\n      }\r\n    }\r\n\r\n    return roomList;\r\n  }\r\n\r\n  getFloorListMarkup() {\r\n    let floors = [];\r\n\r\n    for (let room of this.rooms) {\r\n      if (floors.indexOf(room.floor) === -1) {\r\n        floors.push(room.floor);\r\n      }\r\n    }\r\n\r\n    floors.sort((a, b) => {\r\n      if (a > b) return 1;\r\n      if (a < b) return -1;\r\n    });\r\n\r\n    let floorList = '';\r\n\r\n    for (let floor of floors) {\r\n      floorList += `<div class=\"diagram__floor\" data-floor=\"${floor}\">\r\n                      <div class=\"diagram__floor-title\">\r\n                            ${this.diagramRowMarkup(`${floor} этаж`)}\r\n                      </div>\r\n                      ${this.getRoomList(floor)}\r\n                    </div>`;\r\n    }\r\n\r\n    return floorList;\r\n  }\r\n\r\n  getMarkup() {\r\n    const header = `<header class=\"header\">\r\n                      <div class=\"logo\"></div>\r\n                      <a href=\"event-new.html\" class=\"button header__button button--blue\" data-event-new-trigger>Создать встречу</a>\r\n                  </header>`;\r\n\r\n    const diagram = `<div class=\"diagram\">\r\n                      <div class=\"diagram__body\">\r\n                        <div class=\"diagram__body-cnt\">\r\n                            <div class=\"diagram__time-line\">${this.diagramRowMarkup(calendarMarkup(), this.diagramTimelineTimeMarkup())}</div>\r\n                            <div class=\"diagram__content-wrapper\">\r\n                              <div class=\"diagram__content\">\r\n                                ${this.diagramRowMarkup(null, this.getCellList(), 'diagram__cell-grid')}\r\n                                ${this.getFloorListMarkup()}\r\n                              </div>\r\n                            </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>`;\r\n\r\n    return `<div class=\"inpex-page\" id=\"app\">\r\n              ${header} \r\n              ${diagram}\r\n            </div>`;\r\n  }\r\n\r\n  bindHandlers() {\r\n    const eventNewTrigger = this.element.querySelector('[data-event-new-trigger]');\r\n\r\n    eventNewTrigger.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      alert('times on');\r\n      // Application.showEventCreate();\r\n    });\r\n\r\n    const windowResizeHandler = () => {\r\n      this.renderClockLine();\r\n    };\r\n\r\n    window.addEventListener('resize', debounce(windowResizeHandler, 66));\r\n  }\r\n\r\n  viewRendered() {\r\n    openCalendar();\r\n    activateRoomName();\r\n    const renderCalendarWidget = new RenderCalendarWidget(this.date);\r\n    renderCalendarWidget.render();\r\n\r\n    this.clock();\r\n\r\n    const renderEvents = new RenderEvents(this.events, this.date, this.minuteStep);\r\n    renderEvents.render();\r\n  }\r\n\r\n}\r\n\r\nexport default MeetingRoomsView;\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/meeting-rooms-view.js","export default class AbstractView {\r\n\r\n  constructor(inputData) {\r\n    this.inputData = inputData;\r\n  }\r\n\r\n  /**\r\n   * returns a DOM element created from getMarkup()\r\n   * and binds event handlers to it\r\n   * @return {Element}\r\n   */\r\n  get element() {\r\n    if (!this._element) {\r\n      const domElement = document.createElement('div');\r\n      domElement.innerHTML = this.getMarkup();\r\n      this._element = domElement.firstChild;\r\n      this.bindHandlers();\r\n    }\r\n    return this._element;\r\n  }\r\n\r\n  renderView() {\r\n    const appElement = document.getElementById('app');\r\n    appElement.parentNode.replaceChild(this.element, appElement);\r\n    this.viewRendered();\r\n  }\r\n\r\n  getMarkup() {\r\n    throw new Error('Abstract method should be implemented');\r\n  }\r\n\r\n  bindHandlers() {\r\n\r\n  }\r\n\r\n  clearHandlers() {\r\n\r\n  }\r\n\r\n  viewRendered() {\r\n\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/abstract-view.js","import hideOnClickOutside from './../../tools/hideOnClickOutside';\r\nimport {addListenerMulti} from './../../tools/helpers';\r\n\r\nconst calendarMarkup = () => {\r\n  return `<div class=\"calendar\" id=\"calendar\">\r\n              <div class=\"calendar__header\">\r\n                  <span class=\"calendar__header-trigger calendar__header-trigger--left circle-icon circle-icon--left\" data-calendar-trigger data-direction=\"left\">\r\n                      <i>\r\n                          <svg width=\"12\" height=\"12\">\r\n                              <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-arrow\"></use>\r\n                          </svg>\r\n                      </i>\r\n                  </span>\r\n                  <span class=\"calendar__header-date-title\" id=\"calendarTrigger\">\r\n                  </span>\r\n                  <div class=\"calendar__header-trigger calendar__header-trigger--right circle-icon\" data-calendar-trigger data-direction=\"right\">\r\n                      <i>\r\n                          <svg width=\"12\" height=\"12\">\r\n                              <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-arrow\"></use>\r\n                          </svg>\r\n                      </i>\r\n                  </div>\r\n              </div>\r\n              <div class=\"calendar__body\" id=\"calendarBody\">\r\n                  <div class=\"calendar-widget\">\r\n                      <div class=\"calendar-widget__body\" id=\"calendarWidget\" data-quarter=\"1\"></div>\r\n                  </div>\r\n              </div>\r\n              <div class=\"calendar__overlay\"></div>\r\n          </div>`;\r\n};\r\n\r\nconst openCalendar = () => {\r\n  const calendarTrigger = document.getElementById('calendarTrigger');\r\n  const calendar = document.getElementById('calendar');\r\n  const body = document.querySelector('body');\r\n  const classToAdd = 'opened';\r\n  const classToBody = 'calendar-opened';\r\n\r\n  if (calendarTrigger === null) {\r\n    return false;\r\n  }\r\n\r\n  const calendarOverlay = calendar.querySelector('.calendar__overlay');\r\n\r\n  calendarTrigger.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    if (calendar.classList.contains(classToAdd)) {\r\n      removeAction();\r\n    } else {\r\n      calendar.classList.add(classToAdd);\r\n      body.classList.add(classToBody);\r\n    }\r\n\r\n    hideOnClickOutside(`#calendar`, removeAction);\r\n\r\n    addListenerMulti(calendarOverlay, 'click touchstart', removeAction);\r\n  });\r\n\r\n  const removeAction = () => {\r\n    calendar.classList.remove(classToAdd);\r\n    body.classList.remove(classToBody);\r\n  };\r\n\r\n  return true;\r\n};\r\n\r\nexport {calendarMarkup, openCalendar};\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/calendar.js","import {addListenerMulti, removeListenerMulti} from './helpers';\r\n\r\nexport default (selector, callback) => {\r\n  const outsideClickListener = (event) => {\r\n    const elem = document.querySelector(selector);\r\n    const elemChildIsTarget = checkEventTarget(event, selector);\r\n    const clickCallback = callback || function () {};\r\n\r\n    if (event.target !== elem && !elemChildIsTarget) {\r\n      clickCallback();\r\n      removeClickListener();\r\n    }\r\n  };\r\n\r\n  const removeClickListener = () => {\r\n    removeListenerMulti(document, 'click touchstart', outsideClickListener);\r\n  };\r\n\r\n  addListenerMulti(document, 'click touchstart', outsideClickListener);\r\n};\r\n\r\nfunction checkEventTarget(event, selector) {\r\n  const elem = document.querySelector(selector);\r\n  let isTarget = false;\r\n\r\n  for (let i = 0; i < elem.childNodes.length; i++) {\r\n    const children = elem.childNodes[i];\r\n\r\n    if (event.target === children) {\r\n      isTarget = true;\r\n      return isTarget;\r\n    } else {\r\n      checkNode(children);\r\n    }\r\n  }\r\n\r\n  function checkNode(node) {\r\n    if (node.hasChildNodes()) {\r\n      for (let i = 0; i < node.childNodes.length; i++) {\r\n        const recuChildren = node.childNodes[i];\r\n        if (event.target === node) {\r\n          isTarget = true;\r\n          return true;\r\n        }\r\n        checkNode(recuChildren);\r\n      }\r\n    } else if (event.target === node) {\r\n      isTarget = true;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  return isTarget;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/tools/hideOnClickOutside.js","const getCoords = (elem) => {\r\n  const box = elem.getBoundingClientRect();\r\n\r\n  return {\r\n    top: box.top + pageYOffset,\r\n    left: box.left + pageXOffset\r\n  };\r\n};\r\n\r\nconst getNodeFromMarkup = (markupTemplate) => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = markupTemplate;\r\n  return div.firstChild;\r\n};\r\n\r\nconst getDay = (date) => { // получить номер дня недели, от 0(пн) до 6(вс)\r\n  let day = date.getDay();\r\n  if (day === 0) {\r\n    day = 7;\r\n  }\r\n  return day - 1;\r\n};\r\n\r\nconst addListenerMulti = (el, s, fn) => {\r\n  s.split(' ').forEach((e) => {\r\n    el.addEventListener(e, fn, false);\r\n  });\r\n};\r\nconst removeListenerMulti = (el, s, fn) => {\r\n  s.split(' ').forEach((e) => {\r\n    el.removeEventListener(e, fn, false);\r\n  });\r\n};\r\n\r\nconst debounce = (f, ms) =>{\r\n  let timer = null;\r\n\r\n  return function (...args) {\r\n    const onComplete = () => {\r\n      f.apply(this, args);\r\n      timer = null;\r\n    };\r\n\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n\r\n    timer = setTimeout(onComplete, ms);\r\n  };\r\n};\r\n\r\nconst getDateValue = (inputDate) => {\r\n  const date = inputDate || new Date();\r\n  const year = new Date(date.getFullYear());\r\n  const month = new Date(date.getFullYear(), date.getMonth());\r\n  const day = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n  const hour = new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours());\r\n  const minute = new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes());\r\n\r\n  return {\r\n    year: year.valueOf(),\r\n    month: month.valueOf(),\r\n    day: day.valueOf(),\r\n    hour: hour.valueOf(),\r\n    minute: minute.valueOf()\r\n  }\r\n};\r\n\r\nexport {getCoords, getNodeFromMarkup, getDay, addListenerMulti, removeListenerMulti, debounce, getDateValue};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/tools/helpers.js","import {getNodeFromMarkup, getDay, getDateValue} from './../../tools/helpers';\r\n\r\nexport default class RenderCalendarWidget {\r\n  constructor(date) {\r\n    this.date = date;\r\n    this.calendarWidget = document.getElementById('calendarWidget');\r\n    this.calendar = document.getElementById('calendar');\r\n    this._monthNames = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];\r\n    this._monthNamesShortcuts = ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\r\n  }\r\n\r\n  getMonth(year, month) {\r\n    const d = new Date(year, month);\r\n    const today = this.date.getDate();\r\n    const currentMonth = this.date.getMonth();\r\n    const now = new Date();\r\n    const nowDay = now.getDate();\r\n    const nowMonth = now.getMonth();\r\n\r\n    let daysView = '';\r\n\r\n    for (let i = 0; i < getDay(d); i++) {\r\n      daysView += '<div class=\"month__day empty\"></div>';\r\n    }\r\n\r\n    while (d.getMonth() === month) {\r\n      let todayClass = '';\r\n      if (d.getDate() === today && currentMonth === month) {\r\n        todayClass = 'today';\r\n      } else if(d.getDate() === nowDay && nowMonth === month) {\r\n        todayClass = 'still-today';\r\n      }\r\n\r\n      daysView += `<div class=\"month__day ${todayClass}\" data-shortcut=\"${month}\">${d.getDate()}</div>`;\r\n\r\n      d.setDate(d.getDate() + 1);\r\n    }\r\n\r\n    if (getDay(d) !== 0) {\r\n      for (let i = getDay(d); i < 7; i++) {\r\n        daysView += '<div class=\"month__day empty\"></div>';\r\n      }\r\n    }\r\n\r\n    const monthView = `<div class=\"calendar-widget__month month\">\r\n                          <div class=\"month__name\" data-motnh=\"${currentMonth}\">${this._monthNames[month]}</div>\r\n                          <div class=\"month__week\">\r\n                              <div class=\"month__day\">Пн</div>\r\n                              <div class=\"month__day\">Вт</div>\r\n                              <div class=\"month__day\">Ср</div>\r\n                              <div class=\"month__day\">Чт</div>\r\n                              <div class=\"month__day\">Пт</div>\r\n                              <div class=\"month__day\">Сб</div>\r\n                              <div class=\"month__day\">Вс</div>\r\n                          </div>\r\n  \r\n                          <div class=\"month__days\">\r\n                              ${daysView}\r\n                          </div>\r\n                      </div>`;\r\n\r\n    return monthView;\r\n  }\r\n\r\n  moveCalendarWidget() {\r\n    const yearQuarter = this.calendarWidget.getAttribute('data-quarter');\r\n\r\n    this.calendarWidget.style.transform = `translateX(-${100 * (+yearQuarter - 1)}%)`;\r\n  }\r\n\r\n  activateCalendarSlide() {\r\n    const calendarTriggerArr = this.calendar.querySelectorAll('[data-calendar-trigger]');\r\n    const self = this;\r\n\r\n    let yearQuarter = this.calendarWidget.getAttribute('data-quarter');\r\n\r\n    for (let calendarTrigger of Array.from(calendarTriggerArr)) {\r\n      calendarTrigger.addEventListener('click', () => {\r\n        const calendarTriggerDirection = calendarTrigger.getAttribute('data-direction');\r\n        const windowWidth = window.innerWidth;\r\n        let quarterMaxValue;\r\n\r\n        if (!this.calendar.classList.contains('opened')) {\r\n          return false;\r\n        }\r\n\r\n        quarterMaxValue = (windowWidth < 1280) ? 12 : 4;\r\n\r\n        if (calendarTriggerDirection === 'left' && yearQuarter > 1) {\r\n          --yearQuarter;\r\n          this.calendarWidget.setAttribute('data-quarter', yearQuarter);\r\n          self.moveCalendarWidget();\r\n        } else if (calendarTriggerDirection === 'right' && yearQuarter < quarterMaxValue) {\r\n          yearQuarter++;\r\n          this.calendarWidget.setAttribute('data-quarter', yearQuarter);\r\n          self.moveCalendarWidget();\r\n        }\r\n        return true;\r\n      });\r\n    }\r\n  }\r\n\r\n  dayHandler() {\r\n    const dayArr = this.calendarWidget.querySelectorAll('.month__days .month__day:not(.empty)');\r\n    const calendarHeaderTitle = this.calendar.querySelector('.calendar__header-date-title');\r\n\r\n\r\n    for (let day of Array.from(dayArr)) {\r\n      const yearValue = this.date.getFullYear();\r\n      const monthValue = day.getAttribute('data-shortcut');\r\n      const dayValue = day.innerHTML;\r\n      const now = new Date();\r\n      const hourValue = now.getHours();\r\n      const minutesValue = now.getMinutes();\r\n      const secondsValue = now.getSeconds();\r\n\r\n      const dateChangeEvent = new CustomEvent(\"dateChange\", {\r\n        detail: {\r\n          date: new Date(yearValue, monthValue, dayValue, hourValue, minutesValue, secondsValue)\r\n        }\r\n      });\r\n\r\n\r\n      day.addEventListener('click', () => {\r\n        this.calendarWidget.querySelector('.month__day.today').classList.remove('today');\r\n        day.classList.add('today');\r\n        calendarHeaderTitle.innerHTML = day.innerHTML + ' ' + this._monthNamesShortcuts[monthValue];\r\n\r\n        document.dispatchEvent(dateChangeEvent);\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const now = new Date();\r\n    const today = getDateValue(now).day;\r\n    const inputDate = this.date;\r\n    const inputDateValue = getDateValue(inputDate).day;\r\n    const day = this.date.getDate();\r\n    const currentYear = this.date.getFullYear();\r\n    const currentMonth = this.date.getMonth() + 1;\r\n\r\n    if (this.calendar === null) {\r\n      return false;\r\n    }\r\n\r\n\r\n    const dayTitle = (inputDateValue === today) ? '· Сегодня' : '';\r\n\r\n    const calendarHeaderTitle = this.calendar.querySelector('.calendar__header-date-title');\r\n    calendarHeaderTitle.innerHTML = `${day} ${this._monthNamesShortcuts[currentMonth - 1]} ${dayTitle}`;\r\n\r\n    for (let i = 0; i <= 11; i++) {\r\n      const monthView = this.getMonth(currentYear, i);\r\n      const monthViewNode = getNodeFromMarkup(monthView);\r\n\r\n      this.calendarWidget.appendChild(monthViewNode);\r\n    }\r\n\r\n    if (window.innerWidth < 1280) {\r\n      this.calendarWidget.setAttribute('data-quarter', currentMonth);\r\n    } else {\r\n      this.calendarWidget.setAttribute('data-quarter', Math.floor((currentMonth + 2) / 3));\r\n    }\r\n\r\n    this.activateCalendarSlide();\r\n\r\n    this.moveCalendarWidget();\r\n\r\n    this.dayHandler();\r\n\r\n    return true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/renderCalendarWidget.js","import {getCoords, getNodeFromMarkup} from './../../tools/helpers';\r\n\r\nexport default () => {\r\n  const diagramBody = document.querySelector('.diagram__body');\r\n  const diagramBodyCnt = document.querySelector('.diagram__body-cnt');\r\n\r\n  if (diagramBody === null) {\r\n    return;\r\n  }\r\n  const diagramRoomArr = diagramBodyCnt.querySelectorAll('.diagram__room');\r\n\r\n  for (let diagramRoom of Array.from(diagramRoomArr)) {\r\n    const diagramRoomName = diagramRoom.querySelector('.diagram__room-name');\r\n    const roomNameTag = `<div class=\"room-name-tag\">${diagramRoomName.innerHTML}</div>`;\r\n    const roomNameTagNode = getNodeFromMarkup(roomNameTag);\r\n    if (diagramRoom.classList.contains('diagram__room--filled')) {\r\n      roomNameTagNode.classList.add('filled');\r\n    }\r\n    diagramRoom.appendChild(roomNameTagNode);\r\n  }\r\n\r\n  diagramBody.addEventListener('scroll', () => {\r\n    const elCoordsLeft = -1 * getCoords(diagramBodyCnt).left;\r\n    const roomNameTagArr = document.querySelectorAll('.room-name-tag');\r\n    const diagramRowBody = document.querySelector('.diagram__row-body');\r\n    const diagramRowBodyLeftCoords = getCoords(diagramRowBody).left;\r\n\r\n    if (elCoordsLeft > 180) {\r\n      for (let roomNameTag of Array.from(roomNameTagArr)) {\r\n        roomNameTag.classList.add('taged');\r\n        roomNameTag.style.transform = `translateX(${-1 * diagramRowBodyLeftCoords + 180}px)`;\r\n      }\r\n    } else {\r\n      for (let roomNameTag of Array.from(roomNameTagArr)) {\r\n        roomNameTag.classList.remove('taged');\r\n      }\r\n    }\r\n  });\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/activateRoomName.js","import {getNodeFromMarkup, getDateValue} from './../../tools/helpers';\r\n\r\nexport default class RenderEvents {\r\n\r\n  constructor(inputEvents, inputDate, minuteStep) {\r\n    this.roomArr = document.querySelectorAll('.diagram__room');\r\n    this.MINUTE = 60 * 1000;\r\n    this.HOUR = 60 * this.MINUTE;\r\n    this.inputEvents = inputEvents;\r\n    this.inputDate = inputDate;\r\n    this.minuteStep = minuteStep;\r\n    this.now = new Date();\r\n    this.today = getDateValue(this.now).day;\r\n    this.inputDay = getDateValue(this.inputDate).day;\r\n    this.inputDayStart = this.inputDay + 8 * this.HOUR;\r\n    this.inputDayEnd = this.inputDay + 23 * this.HOUR;\r\n    this.roomsWithBusyTime = {};\r\n    this.eventLeft;\r\n    this.eventWidth;\r\n  }\r\n\r\n  getEventMarkup (isFilled, inputEventId, start, end) {\r\n    const extraClass = (isFilled) ? 'time-slot--filled' : 'time-slot--empty';\r\n    const timeSlotType = (isFilled) ? 'data-event-edit-trigger' : 'data-event-new-trigger';\r\n    const eventId = (inputEventId !== null) ? `data-event-id=\"${inputEventId}\"` : '';\r\n    const startTime = (start !== undefined) ? `data-start-time = \"${start}\"` : '';\r\n    const endTime = (end !== undefined) ? `data-end-time = \"${end}\"` : '';\r\n\r\n    return `<span class=\"time-slot ${extraClass}\" \r\n              ${eventId}\r\n              ${timeSlotType} \r\n              ${startTime} \r\n              ${endTime}></span>`\r\n  };\r\n\r\n  getTimeNode(isFilled, inputEventId, start, end, left, width) {\r\n    const timeNode = getNodeFromMarkup(this.getEventMarkup(isFilled, inputEventId, start, end));\r\n    timeNode.style.cssText = `left: ${left}px; width: ${width}px`;\r\n    return timeNode;\r\n  }\r\n\r\n  renderPlannedEvent() {\r\n    for (let event of this.inputEvents) {\r\n      const eventDateStart = new Date(event.dateStart);\r\n      const eventDateEnd = new Date(event.dateEnd);\r\n      const eventDateStartValue = eventDateStart.valueOf();\r\n      const eventDateEndValue = eventDateEnd.valueOf();\r\n      const eventStartMinuteFromDateStart = Math.round((eventDateStartValue - this.inputDayStart) / this.MINUTE);\r\n      const eventEndMinuteFromDateStart = Math.round((eventDateEndValue - this.inputDayStart) / this.MINUTE);\r\n      const eventDuration = Math.round((eventDateEndValue - eventDateStartValue) / this.MINUTE);\r\n\r\n      for (let room of Array.from(this.roomArr)) {\r\n        const roomId = room.getAttribute('data-room-id');\r\n        const timeContainer = room.querySelector('.diagram__day');\r\n\r\n        if (event.room.id === roomId) { //Событие происходит в нужной комнате\r\n          const eventStartHour = Math.floor((eventDateStartValue - this.inputDay)/ this.HOUR);\r\n\r\n          this.eventLeft = ((eventDateStartValue - this.inputDayStart) * this.minuteStep) / this.MINUTE;\r\n          this.eventWidth = eventDuration * this.minuteStep;\r\n\r\n          let busyTimeNode = this.getTimeNode(true, event.id, eventDateStartValue, eventDateEndValue, this.eventLeft, this.eventWidth);\r\n\r\n          timeContainer.appendChild(busyTimeNode);\r\n\r\n          for (let minute = eventStartMinuteFromDateStart; minute <= eventEndMinuteFromDateStart; minute++) {\r\n            let timeStampMinute = this.inputDayStart + minute * this.MINUTE;\r\n            if (this.roomsWithBusyTime.hasOwnProperty(roomId)) {\r\n              this.roomsWithBusyTime[roomId][timeStampMinute] = true;\r\n\r\n            } else {\r\n              this.roomsWithBusyTime[roomId] = {\r\n                [timeStampMinute]: true\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderUnplannedEvents() {\r\n    const IS_TODAY_EQUAL_TO_THE_INPUT_DAY = this.today === this.inputDay;\r\n    let minutesFromHourStarted = 0;\r\n\r\n    let startMinute = (this.inputDayStart - this.inputDay) / this.MINUTE;\r\n    let endMinute = (this.inputDayEnd - this.inputDay) / this.MINUTE;\r\n\r\n    if (IS_TODAY_EQUAL_TO_THE_INPUT_DAY) {\r\n      startMinute += (getDateValue(this.now).minute - this.inputDayStart) / this.MINUTE;\r\n      minutesFromHourStarted = this.now.getMinutes();\r\n    }\r\n\r\n    if (this.today <= this.inputDay) {\r\n      for (let room of Array.from(this.roomArr)) {\r\n        const roomId = room.getAttribute('data-room-id');\r\n        const timeContainer = room.querySelector('.diagram__day');\r\n\r\n        let roomArrWithFreeTime = [];\r\n        let roomWithFreeTime = {};\r\n        let hour = 60 - minutesFromHourStarted;\r\n        let eventDuration = 0;\r\n\r\n        minuteLoop: for (let minute = startMinute; minute <= endMinute; minute++) {\r\n          let timeStampMinute = this.inputDay + minute * this.MINUTE;\r\n\r\n          if (hour === 1) {\r\n            hour = 60;\r\n            roomWithFreeTime.end = timeStampMinute;\r\n\r\n            roomArrWithFreeTime.push(roomWithFreeTime);\r\n            roomWithFreeTime = {};\r\n            continue minuteLoop;\r\n          }\r\n\r\n          if (this.roomsWithBusyTime.hasOwnProperty(roomId)) {\r\n            if (this.roomsWithBusyTime[roomId].hasOwnProperty(timeStampMinute)) {\r\n              if (roomWithFreeTime.hasOwnProperty('start')) { //Если свободное время уже было\r\n                roomWithFreeTime.end = timeStampMinute;\r\n\r\n                roomArrWithFreeTime.push(roomWithFreeTime);\r\n                roomWithFreeTime = {};\r\n                continue minuteLoop;\r\n              }\r\n\r\n              eventDuration++;\r\n              roomWithFreeTime = {};\r\n              continue minuteLoop;\r\n            } else if(eventDuration > 0) {\r\n              if (hour - eventDuration > 0) {\r\n                hour = hour - eventDuration;\r\n              } else if (hour - eventDuration == 0) {\r\n                hour = 60;\r\n              } else if (hour - eventDuration < 0) {\r\n                hour = 60 - ((eventDuration - hour) - Math.floor((eventDuration - hour)/60)*60);\r\n              }\r\n              eventDuration = 0;\r\n            }\r\n          }\r\n\r\n          if (!roomWithFreeTime.hasOwnProperty('start')) {\r\n            roomWithFreeTime.start = timeStampMinute - this.MINUTE;\r\n          }\r\n\r\n          if (minute === endMinute) {\r\n            roomWithFreeTime.end = timeStampMinute;\r\n            roomArrWithFreeTime.push(roomWithFreeTime);\r\n          }\r\n\r\n          hour--;\r\n        }\r\n\r\n        for (let freeTime of roomArrWithFreeTime) {\r\n          let freeTimeStart = freeTime.start;\r\n          let freeTimeDuration = (freeTime.end - freeTime.start) / this.MINUTE;\r\n\r\n          this.eventLeft = ((freeTimeStart - this.inputDayStart) * this.minuteStep) / this.MINUTE;\r\n          this.eventWidth = freeTimeDuration * this.minuteStep;\r\n\r\n          let freeTimeNode = this.getTimeNode(false, null, freeTimeStart, freeTime.end, this.eventLeft, this.eventWidth);\r\n\r\n          timeContainer.appendChild(freeTimeNode);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.renderPlannedEvent();\r\n    this.renderUnplannedEvents();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/views/meeting-rooms-view/renderEvents.js","import 'whatwg-fetch';\r\nimport {query, mutation} from './queries';\r\nimport grapnhQlRequest from './grapnhQlRequest';\r\nimport {getDateValue} from './../tools/helpers';\r\n\r\n\r\nclass ApiService {\r\n\r\n  getRooms() {\r\n    return grapnhQlRequest(query.rooms);\r\n  }\r\n\r\n  getEvents() {\r\n    return grapnhQlRequest(query.events);\r\n  }\r\n\r\n  getUsers() {\r\n    return grapnhQlRequest(query.users);\r\n  }\r\n\r\n  getAll() {\r\n    const responseData = {};\r\n    let getAllRequest = new Promise((resolve, reject) => {\r\n        resolve(this.getRooms());\r\n      }\r\n    );\r\n    return getAllRequest\r\n      .then((res) => {\r\n        responseData.rooms = res.data.rooms;\r\n        return this.getEvents();\r\n      })\r\n      .then((res) => {\r\n        /**\r\n         * @typedef {Object} EventsSortedByDate\r\n         * @property {Event[]} timestamp Встречи отсортированные по дате.\r\n         */\r\n        let eventsSortedByDate = {};\r\n        for (let event of res.data.events) {\r\n          const dateStart = new Date(event.dateStart);\r\n          const dateStartDay = getDateValue(dateStart).day;\r\n\r\n          if (!eventsSortedByDate.hasOwnProperty(dateStartDay)) {\r\n            eventsSortedByDate[dateStartDay] = [event];\r\n          } else {\r\n            eventsSortedByDate[dateStartDay].push(event)\r\n          }\r\n        }\r\n        responseData.events = eventsSortedByDate;\r\n\r\n        // console.log(eventsSortedByDate);\r\n        return this.getUsers();\r\n      })\r\n      .then((res) => {\r\n        responseData.users = res.data.users;\r\n        return responseData;\r\n      })\r\n      .catch((error) => {\r\n        throw new Error(`Rejected: ${error}`)\r\n      });\r\n  }\r\n\r\n}\r\n\r\nexport default new ApiService();\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/api-service/index.js","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/~/whatwg-fetch/fetch.js","import query from './query';\r\nimport mutation from './mutation';\r\n\r\nexport {query, mutation};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/api-service/queries/index.js","export default {\r\n  users: `\r\n  {\r\n    users {\r\n      id,\r\n      login,\r\n      homeFloor,\r\n      avatarUrl\r\n    }\r\n  }`,\r\n  rooms: `\r\n  {\r\n    rooms {\r\n      id,\r\n      title,\r\n      capacity,\r\n      floor\r\n    }\r\n  }`,\r\n  events: `\r\n  {\r\n    events {\r\n      id,\r\n      title,\r\n      dateStart,\r\n      dateEnd,\r\n      users {\r\n        id\r\n      },\r\n      room {\r\n        id\r\n      }\r\n    }\r\n  }`\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/api-service/queries/query.js","export default {\r\n  createEvent: (eventInput, usersIds, roomId) => {\r\n    return `\r\n    mutation {\r\n      createEvent(input: ${eventInput}, usersIds: ${usersIds}, roomId: ${roomId}) {\r\n        id,\r\n        title,\r\n        dateStart,\r\n        dateEnd,\r\n        users {\r\n          id\r\n        },\r\n        room {\r\n          id\r\n        }\r\n      }\r\n    }`;\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/api-service/queries/mutation.js","const checkStatus = (response) => {\r\n  if (response.status >= 200 && response.status < 300) {\r\n    return response;\r\n  } else {\r\n    throw new Error(`${response.status}: ${response.statusText}`);\r\n  }\r\n};\r\n\r\nconst parseJSON = (response) => response.json();\r\n\r\nexport default (request) => {\r\n  return window.fetch('/graphql', {\r\n    method: 'POST',\r\n    headers: {'Content-Type': 'application/json'},\r\n    body: JSON.stringify({ query:  request })\r\n  })\r\n    .then(checkStatus)\r\n    .then(parseJSON);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/api-service/grapnhQlRequest.js","export default function () {\r\n  const file = 'img/icons/sprite.svg'; // путь к файлу спрайта\r\n  const revision = 1;            // версия спрайта\r\n  if (!document.createElementNS || !document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect) {\r\n    return true;\r\n  }\r\n  const isLocalStorage = 'localStorage' in window && window['localStorage'] !== null;\r\n  let request;\r\n  let data;\r\n  const insertIT = () => {\r\n    document.body.insertAdjacentHTML('afterbegin', data);\r\n  };\r\n  const insert = () => {\r\n    if (document.body) {\r\n      insertIT();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', insertIT);\r\n    }\r\n  };\r\n\r\n  if (isLocalStorage && localStorage.getItem('inlineSVGrev') === revision) {\r\n    data = localStorage.getItem('inlineSVGdata');\r\n    if (data) {\r\n      insert();\r\n      return true;\r\n    }\r\n  }\r\n  try {\r\n    request = new XMLHttpRequest();\r\n    request.open('GET', file, true);\r\n    request.onload = () => {\r\n      if (request.status >= 200 && request.status < 400) {\r\n        data = request.responseText;\r\n        insert();\r\n        if (isLocalStorage) {\r\n          localStorage.setItem('inlineSVGdata', data);\r\n          localStorage.setItem('inlineSVGrev', revision);\r\n        }\r\n      }\r\n    };\r\n    request.send();\r\n  } catch (e) {\r\n    throw new Error(e);\r\n  }\r\n  return true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./D:/Sayan/shri-test-task-3/client/js/tools/createSvgSprite.js"],"sourceRoot":""}